<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Material Theme Builder</title>
    <link rel="icon" href="assets/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <style>
      body {
        --plugin-height: 100vh;
        --plugin-width: 100%;
        margin: 0;
        padding: 0;
      }
      body,
      theme-generator {
        outline: none;
        height: var(--plugin-height);
        width: var(--plugin-width);
      }
    </style>
  </head>

  <body>
    <theme-generator id="root" name="material-theme"></theme-generator>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-D9MC9PMX4M"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      window.gtag = function () {
        dataLayer.push(arguments);
        console.debug("track", arguments);
      };
      const startTime = new Date();
      window.gtag("js", startTime);
      window.gtag("config", "G-D9MC9PMX4M", {
        cookie_flags: "SameSite=None;Secure",
        debug_mode: false,
      });
      // debug_mode: true,
      window.dataLayer.push({
        event: "open_plugin",
        date: startTime.getTime(),
      });
      window.addEventListener("beforeunload", function () {
        const endTime = new Date();
        window.dataLayer.push({
          event: "close_plugin",
          date: endTime.getTime(),
          timeonpage: `${endTime.getTime() - startTime.getTime()}`,
        });
      });
      document.addEventListener("apply-theme", (e) => {
        const theme = e.detail;
        const hash = window.location.hash.slice(1) || "";
        const themeType = hash.startsWith("/custom") ? "custom" : "dynamic";
        window.gtag("event", "theme", {
          type: themeType,
          seed: theme.seed,
          primary: theme.source.primary,
          secondary: theme.source.secondary,
          tertiary: theme.source.tertiary,
          neutral: theme.source.neutral,
          neutralVariant: theme.source.neutralVariant,
          customColors: theme.customColors,
        });
      });
    </script>

    <script src="third_party/jszip.min.js"></script>
    <script src="app.js?version=1.0.3"></script>
  </body>
</html>
